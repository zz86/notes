
#### server匹配规则

- 客户端通过域名访问服务器时会将域名与被解析的ip一同放在请求中。当请求到了nginx中时。nginx会先去匹配ip，如果listen中没有找到对应的ip，就会通过域名进行匹配，匹配成功以后，再匹配端口。当这三步完成，就会找到对应的server的location对应的资源。

- 实际操作中一般将 listen 后面接端口而不接ip，因为接了ip后就只能通过ip匹配到相对应的server；