
## 操作系统启动过程
首先，启动 BIOS。这是一个特别小的小系统，只能干特别小的一件事情。其实就是读取硬盘的 MBR 启动扇区，将 GRUB 启动起来；然后将权力交给 GRUB，GRUB 加载内核、加载作为根文件系统的 initramfs 文件；然后将权力交给内核；最后内核启动，初始化整个操作系统。

## CPU的工作模式
按照 CPU 功能升级迭代的顺序，CPU 的工作模式有实模式、保护模式、长模式

1. 实模式，早期 CPU 是为了支持单道程序运行而实现的，单道程序能掌控计算机所有的资 源，早期的软件规模不大，内存资源也很少，所以实模式极其简单，仅支持 16 位地址空 间，分段的内存模型，对指令不加限制地运行，对内存没有保护隔离作用。 
2. 保护模式，随着多道程序的出现，就需要操作系统了。内存需求量不断增加，所以 CPU 实现了保护模式以支持这些需求。 保护模式包含特权级，对指令及其访问的资源进行控制，对内存段与段之间的访问进行严 格检查，没有权限的绝不放行，对中断的响应也要进行严格的权限检查，扩展了 CPU 寄存 器位宽，使之能够寻址 32 位的内存地址空间和处理 32 位的数据，从而 CPU 的性能大大 提高。 
3. 长模式，又名 AMD64 模式，最早由 AMD 公司制定。由于软件对 CPU 性能需求永无 止境，所以长模式在保护模式的基础上，把寄存器扩展到 64 位同时增加了一些寄存器，使 CPU 具有了能处理 64 位数据和寻址 64 位的内存地址空间的能力。 长模式弱化段模式管理，只保留了权限级别的检查，忽略了段基址和段长度，而地址的检 查则交给了 MMU。

## 虚拟地址
每个应用程序的虚拟地址空间都是相同且独立的。

那么这个地址是由谁产生的呢？ 答案是链接器

其实我们开发软件经过编译步骤后，就需要链接成可执行文件才可以运行，而链接器的主要工作就是把多个代码模块组装在一起，并解决模块之间的引用，即处 理程序代码间的地址引用，形成程序运行的静态内存空间视图。 

只不过这个地址是虚拟而统一的，而根据操作系统的不同，这个虚拟地址空间的定义也许 不同，应用软件开发人员无需关心，由开发工具链给自动处理了。由于这虚拟地址是独立 且统一的，所以各个公司开发的各个应用完全不用担心自己的内存空间被占用和改写。

