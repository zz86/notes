
三层网络架构设计主要包括核心层、汇聚层、接入层这三个层。
![[Pasted image 20220905102326.png|700]]
首先是核心层。交换层的核心交换机为进出数据中心的数据包提供高速转发的功能，为多 个汇聚层提供连通性，同时也为整个网络提供灵活的 L3 路由网络。 

然后是汇聚层。汇聚交换机与接入交换机相连，提供防火墙、SSL 卸载、入侵检测、网络 分析等其他服务。

最后我们来看接入层。接入交换机通常位于机架的顶部，因此它们也被称为 ToR 交换机， 并且它们与服务器物理连接。

![[Pasted image 20220905104809.png]]

核心层可以提供最优的区间传输， 汇聚层可以提供基于策略的连接 ，而接入层可以为多业务应用和其他的网络应用提供用户到网络的接入。

## 二层网络和三层网络
在网络结构中，有**二层网络**和**三层网络**两种选择。

在这里的二层、三层是按照逻辑拓扑结构进行的分类，并不是说ISO七层模型中的数据链路层和网络层，而是**指核心层，汇聚层和接入层，这三层都部署的就是三层网络结构，二层网络结构没有汇聚层。**

只有核心层和接入层的二层网络结构模式运行简便，交换机根据MAC地址表进行数据包的转发，有则转发，无则泛洪，即将数据包广播发送到所有端口，如果目的终端收到给出回应，那么交换机就可以将该MAC地址添加到地址表中，这是交换机对MAC地址进行建立的过程。

但这样频繁的对未知的MAC目标的数据包进行广播，在大规模的网络架构中形成的网络风暴是非常庞大的，这也很大程度上限制了二层网络规模的扩大，因此二层网络的组网能力非常有限，所以一般只是用来搭建小局域网。

**与二层网络结构不同的是，三层网络结构可以组建大型的网络。**

核心层是整个网络的支撑脊梁和数据传输通道，重要性不言而喻，因此在整个三层网络结构中，核心层的设备要求是最高的，必须配备高性能的数据冗余转接设备和防止负载过剩的均衡负载的设备，以降低各核心层交换机所需承载的数据量。（网络的高速交换主干）

汇聚层是连接网络的核心层和各个接入的应用层，在两层之间承担“媒介传输”的作用。

汇聚层应该具备以下功能：实施安全功能（划分 VLAN和配置 ACL）、工作组整体接入功能、虚拟网络过滤功能。

因此，汇聚层设备应采用三层交换机。（提供基于策略的连接）

接入层的面向对象主要是终端客户，为终端客户提供接入功能。（将工作站接入网络）

二层网络仅仅通过MAC寻址即可实现通讯，但仅仅是同一个冲突域内；三层网络则需要通过IP路由实现跨网段的通讯，可以跨多个冲突域。

三层交换机在一定程度上可以替代路由器，但是应该清醒的认识到三层交换机出现最重要的目的是加快大型局域网内部的数据交换，所具备的路由功能也多是围绕这一目的而展开的，所以他的路由功能没有同一档次的专业路由器强，在安全、协议支持等方面还有许多欠缺，并不能完全取代路由器工作。

在实际应用过程中，典型的做法是：处于同一个局域网中的各个子网的互联以及局域网中VLAN间的路由，用三层交换机来代替路由器，而只有局域网与公网互联之间要实现跨地域的网络访问时，才通过专业路由器。

###### 二层网络和三层网络的区别
1、二层网络仅仅通过MAC寻址即可实现通讯，三层网络需要通过IP路由实现跨网段的通讯，可以跨多个冲突域。

2、二层网络的组网能力非常有限，一般是小局域网；三层网络则可以组大型的网络。

3、二层网络基本上是一个安全域，也就是说在同一个二层网络内，终端的安全性从网络上来讲基本上是一样的，除非有其他特殊的安全措施；三层网络则可以划分出相对独立的多个安全域。

4、很多技术相对是在二层局域网中用的多，比如DHCP、windows提供的共享连接等，如需在三层网络上使用，则需要考虑其他设备的支持（比如通过DHCP中继代理等）或通过其他的方式来实现。

三层交换机和二层交换机：

普通的交换机是二层交换机，二层交换机只识别MAC地址，不识别IP地址（IP地址由电脑负责转换），不能路由，所以叫二层交换机。

三层交换机不但能识别MAC地址，还能把MAC地址中的IP地址识别出来，进行路由。